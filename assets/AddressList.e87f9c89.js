import{A as v}from"./index.07080e2f.js";import{A as S}from"./AddAddress.4df76707.js";import{g as h,h as C,A as B,r as s,L,o as f,j as m,w as a,a as r,J as N,b as o,e as x,t as d,m as j,l as q,E as M}from"./index.de7099bd.js";const T=_=>_?_.replace(new RegExp("(?<=\\d{3})\\d{4}(?=\\d{4})"),"****"):"",z={class:"flex flex-row justify-between"},F=r("span",null,"\u6211\u7684\u6536\u8D27\u5730\u5740",-1),J={class:"text-[12px]"},P={class:"mt-2 flex flex-row justify-between items-end text-gray-600 text-[14px]"},O={__name:"AddressList",setup(_){const p=h({pageIndex:1}),n=h({listData:[],pageStart:1,pageEnd:1,totalCount:0,pageCount:0}),g=C(!1),u=()=>{g.value=!0,v.addressInfo.getMyAddressInfoList(p).then(t=>{console.log(t),n.listData=t.listData,n.pageStart=t.pageStart,n.pageEnd=t.pageEnd,n.totalCount=t.totalCount,n.pageCount=t.pageCount}).finally(()=>{g.value=!1})};u();const y=t=>{console.log(t),p.pageIndex=t,u()},b=t=>{v.addressInfo.deleteById(t.id).then(l=>{M.success("\u5220\u9664\u6210\u529F"),u()})},i=C(!1);return B(i,(t,l)=>{t===!1&&u()}),(t,l)=>{const c=s("el-table-column"),w=s("el-tag"),D=s("el-button"),A=s("el-popconfirm"),I=s("el-table"),k=s("el-pagination"),V=s("el-dialog"),$=s("el-card"),E=L("loading");return f(),m($,{shadow:"never"},{header:a(()=>[r("div",z,[F,r("span",{class:"text-primary cursor-pointer text-[14px] hover:underline",onClick:l[0]||(l[0]=e=>i.value=!0)},"\u65B0\u589E\u5730\u5740")])]),default:a(()=>[N((f(),m(I,{data:n.listData,stripe:"",border:"",style:{width:"100%"},"row-key":"id","max-height":"550px"},{default:a(()=>[o(c,{label:"\u6536\u4EF6\u4EBA\u59D3\u540D",prop:"address_name",width:"120",align:"center"}),o(c,{label:"\u6536\u4EF6\u4EBA\u7535\u8BDD",width:"120",align:"center"},{default:a(({row:e})=>[x(d(j(T)(e.address_tel)),1)]),_:1}),o(c,{label:"\u6536\u8D27\u5730\u5740","min-width":"230"},{default:a(({row:e})=>[r("span",J,d(`${e.province} ${e.city} ${e.city} ${e.address_detail}`),1)]),_:1}),o(c,{label:"\u5730\u5740\u6807\u7B7E",width:"120",align:"center"},{default:a(({row:e})=>[e.address_tag?(f(),m(w,{key:0},{default:a(()=>[x(d(e.address_tag),1)]),_:2},1024)):q("",!0)]),_:1}),o(c,{label:"\u64CD\u4F5C",width:"80",align:"center"},{default:a(({row:e})=>[o(A,{title:"\u786E\u5B9A\u8981\u5220\u9664\u5417",onConfirm:U=>b(e)},{reference:a(()=>[o(D,{size:"small",type:"danger"},{default:a(()=>[x("\u5220\u9664")]),_:1})]),_:2},1032,["onConfirm"])]),_:1})]),_:1},8,["data"])),[[E,g.value]]),r("div",P,[r("p",null,"\u5F53\u524D\u5171\u7B2C"+d(p.pageIndex)+"\u9875\uFF0C\u5171"+d(n.pageCount)+"\u9875\uFF0C\u5171"+d(n.totalCount)+"\u6761",1),o(k,{background:"",layout:"prev, pager, next","current-page":p.pageIndex,onCurrentChange:y,total:n.totalCount},null,8,["current-page","total"])]),o(V,{"destroy-on-close":!0,"close-on-click-modal":!1,"close-on-press-escape":!1,modelValue:i.value,"onUpdate:modelValue":l[2]||(l[2]=e=>i.value=e)},{default:a(()=>[o(S,{onCloseDialog:l[1]||(l[1]=e=>i.value=!1)})]),_:1},8,["modelValue"])]),_:1})}}};export{O as default};
