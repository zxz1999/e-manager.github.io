import{g as v,h,B as E,r as s,M as S,o as f,j as m,w as a,A as C,a as r,K as N,b as n,e as x,t as d,m as j,l as L,E as M}from"./index.e83bda25.js";import{A as q}from"./AddAddress.8eb07cd5.js";const T=_=>_?_.replace(new RegExp("(?<=\\d{3})\\d{4}(?=\\d{4})"),"****"):"",z={class:"flex flex-row justify-between"},F=r("span",null,"\u6211\u7684\u6536\u8D27\u5730\u5740",-1),K={class:"text-[12px]"},P={class:"mt-2 flex flex-row justify-between items-end text-gray-600 text-[14px]"},J={__name:"AddressList",setup(_){const p=v({pageIndex:1}),o=v({listData:[],pageStart:1,pageEnd:1,totalCount:0,pageCount:0}),g=h(!1),u=()=>{g.value=!0,C.addressInfo.getMyAddressInfoList(p.pageIndex).then(t=>{console.log(t),o.listData=t.listData,o.pageStart=t.pageStart,o.pageEnd=t.pageEnd,o.totalCount=t.totalCount,o.pageCount=t.pageCount}).finally(()=>{g.value=!1})};u();const y=t=>{console.log(t),p.pageIndex=t,u()},b=t=>{C.addressInfo.deleteById(t.id).then(l=>{M.success("\u5220\u9664\u6210\u529F"),u()})},i=h(!1);return E(i,(t,l)=>{t===!1&&u()}),(t,l)=>{const c=s("el-table-column"),w=s("el-tag"),D=s("el-button"),I=s("el-popconfirm"),A=s("el-table"),k=s("el-pagination"),V=s("el-dialog"),$=s("el-card"),B=S("loading");return f(),m($,{shadow:"never"},{header:a(()=>[r("div",z,[F,r("span",{class:"text-primary cursor-pointer text-[14px] hover:underline",onClick:l[0]||(l[0]=e=>i.value=!0)},"\u65B0\u589E\u5730\u5740")])]),default:a(()=>[N((f(),m(A,{data:o.listData,stripe:"",border:"",style:{width:"100%"},"row-key":"id","max-height":"550px"},{default:a(()=>[n(c,{label:"\u6536\u4EF6\u4EBA\u59D3\u540D",prop:"address_name",width:"120",align:"center"}),n(c,{label:"\u6536\u4EF6\u4EBA\u7535\u8BDD",width:"120",align:"center"},{default:a(({row:e})=>[x(d(j(T)(e.address_tel)),1)]),_:1}),n(c,{label:"\u6536\u8D27\u5730\u5740","min-width":"230"},{default:a(({row:e})=>[r("span",K,d(`${e.province} ${e.city} ${e.city} ${e.address_detail}`),1)]),_:1}),n(c,{label:"\u5730\u5740\u6807\u7B7E",width:"120",align:"center"},{default:a(({row:e})=>[e.address_tag?(f(),m(w,{key:0},{default:a(()=>[x(d(e.address_tag),1)]),_:2},1024)):L("",!0)]),_:1}),n(c,{label:"\u64CD\u4F5C",width:"80",align:"center"},{default:a(({row:e})=>[n(I,{title:"\u786E\u5B9A\u8981\u5220\u9664\u5417",onConfirm:U=>b(e)},{reference:a(()=>[n(D,{size:"small",type:"danger"},{default:a(()=>[x("\u5220\u9664")]),_:1})]),_:2},1032,["onConfirm"])]),_:1})]),_:1},8,["data"])),[[B,g.value]]),r("div",P,[r("p",null,"\u5F53\u524D\u5171\u7B2C"+d(p.pageIndex)+"\u9875\uFF0C\u5171"+d(o.pageCount)+"\u9875\uFF0C\u5171"+d(o.totalCount)+"\u6761",1),n(k,{background:"",layout:"prev, pager, next","current-page":p.pageIndex,onCurrentChange:y,total:o.totalCount},null,8,["current-page","total"])]),n(V,{"destroy-on-close":!0,"close-on-click-modal":!1,"close-on-press-escape":!1,modelValue:i.value,"onUpdate:modelValue":l[2]||(l[2]=e=>i.value=e)},{default:a(()=>[n(q,{onCloseDialog:l[1]||(l[1]=e=>i.value=!1)})]),_:1},8,["modelValue"])]),_:1})}}};export{J as default};
